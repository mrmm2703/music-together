"use strict";var deviceId,spotifyPlayer,currentTrack,socket=io.connect("https://morahman.me:3000"),urlParams=new URLSearchParams(window.location.search);window.onSpotifyWebPlaybackSDKReady=function(){(spotifyPlayer=new Spotify.Player({name:"Music Together!",getOAuthToken:function(e){e(accessToken)}})).addListener("initialization_error",function(e){var r=e.error;console.error(r)}),spotifyPlayer.addListener("authentication_error",function(e){var r=e.error;console.error(r)}),spotifyPlayer.addListener("account_error",function(e){var r=e.error;console.error(r)}),spotifyPlayer.addListener("playback_error",function(e){var r=e.error;console.error(r)}),spotifyPlayer.addListener("player_state_changed",function(e){updatePlayer(),e.track_window.current_track.uri!=currentTrack&&(changedSong(),updatePlayer())}),spotifyPlayer.addListener("ready",function(e){var r=e.device_id;deviceId=r,console.log("READY! DEVICE ID: "+r),initSocketListeners(),socket.emit("joinedGroup",{group:group_id,name:user_name,prof_pic:user_prof_pic,id:user_id}),"join"==urlParams.get("action")&&socket.emit("whereAreWe")}),spotifyPlayer.addListener("not_ready",function(e){var r=e.device_id;console.log("NOT READY! DEVICE ID: "+r)}),spotifyPlayer.connect()};
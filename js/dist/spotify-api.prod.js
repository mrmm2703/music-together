"use strict";function searchSpotify(e){$.ajax({url:"https://api.spotify.com/v1/search?type=album,artist,track,playlist&limit=8&q="+e,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+accessToken},success:function(e){searchSpotifyResponse(e)},error:function(e){alert("An error occured while searching."),console.log(e)}})}function spotifyPlay(e){var o,r,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,t=3<arguments.length&&void 0!==arguments[3]&&arguments[3];console.log("SPOTIFY PLAY:"),console.log("TRACK: "+e),console.log("CONTEXT: "+s),null!=s?("artist"==s.substring(8,14)&&(o=JSON.stringify({context_uri:s})),o=null!=n?JSON.stringify({context_uri:s,offset:{uri:e},position_ms:n}):JSON.stringify({context_uri:s,offset:{uri:e}}),$.ajax({url:"https://api.spotify.com/v1/me/player/play?device_id="+deviceId,data:o,type:"PUT",headers:{Authorization:"Bearer "+accessToken},success:function(){console.log("PLAY REQUEST SUCCESSFUL"),t&&makePopup("Playing song")},error:function(e){console.error("PLAY RESULT FAILED:"),console.error(e),t&&makePopup("Could not play song",!0)}})):(r=null!=n?JSON.stringify({uris:[e],position_ms:n}):JSON.stringify({uris:[e]}),$.ajax({url:"https://api.spotify.com/v1/me/player/play?device_id="+deviceId,data:r,type:"PUT",headers:{Authorization:"Bearer "+accessToken},success:function(){console.log("PLAY REQUEST SUCCESSFUL"),t&&makePopup("Playing song")},error:function(e){console.error("PLAY RESULT FAILED:"),console.error(e),t&&makePopup("Could not play song",!0)}}))}function spotifyPlayPlaylistAlbum(e){var o=1<arguments.length&&void 0!==arguments[1]&&arguments[1];$.ajax({url:"https://api.spotify.com/v1/me/player/play?device_id="+deviceId,data:JSON.stringify({context_uri:e,offset:{position:0}}),type:"PUT",headers:{Authorization:"Bearer "+accessToken},success:function(){console.log("PLAY REQUEST SUCCESSFUL"),o&&makePopup("Playing successfully")},error:function(e){console.error("PLAY RESULT FAILED:"),console.error(e),makePopup("Couldn't play",!0)}})}function addToSpotifyQueue(e){var o=1<arguments.length&&void 0!==arguments[1]&&arguments[1];console.log(e),console.log("addToSpotifyQueue"),console.log("https://api.spotify.com/v1/me/player/queue?uri="+e+"&device_id="+deviceId),console.log("Bearer "+accessToken),$.ajax({url:"https://api.spotify.com/v1/me/player/queue?uri="+e+"&device_id="+deviceId,type:"POST",headers:{Authorization:"Bearer "+accessToken},success:function(e){console.log("ADD TO QUEUE SUCCESSFUL"),console.log(e),o&&makePopup("Added to queue")},error:function(e){console.error("ADD TO QUEUE FAILED:"),console.error(e),o&&makePopup("Could not add to queue",!0)}})}function checkLiked(e){return new Promise(function(o,r){$.ajax({url:"https://api.spotify.com/v1/me/tracks/contains?ids="+e,type:"GET",headers:{Authorization:"Bearer "+accessToken},success:function(e){o(e[0])},error:function(e){console.error("CHECK LIKED FAILED"),console.error(e),makePopup("Error while getting saved tracks",!0),r()}})})}function getPlaylists(){return new Promise(function(o,r){$.ajax({url:"https://api.spotify.com/v1/me/playlists",type:"GET",headers:{Authorization:"Bearer "+accessToken},success:function(e){o(e)},error:function(e){console.error("GET PLAYLISTS FAIELD"),console.error(e),makePopup("Error while getting playlists",!0),r()}})})}function addToPlaylist(e,s){return new Promise(function(o,r){$.ajax({url:"https://api.spotify.com/v1/playlists/"+s+"/tracks?uris=spotify:track:"+e,type:"POST",headers:{Authorization:"Bearer "+accessToken},success:function(e){o(e)},error:function(e){console.error("ADD TO PLAYLIST FAILED"),console.error(e),r(e)}})})}function createPlaylist(e,s){return new Promise(function(o,r){$.ajax({url:"https://api.spotify.com/v1/users/"+user_id+"/playlists",type:"POST",data:JSON.stringify({name:e,public:!1,collaborative:!0,description:s}),headers:{Authorization:"Bearer "+accessToken},success:function(e){o(e)},error:function(e){console.error("CREATE PLAYLIST FAILED"),console.error(e),r(e)}})})}function followPlaylist(e){return new Promise(function(o,r){$.ajax({url:"https://api.spotify.com/v1/playlists/"+e+"/followers",type:"PUT",headers:{Authorization:"Bearer "+accessToken,"Content-Type":"application/json"},success:function(e){o(e)},error:function(e){console.error("FOLLOW PLAYLIST FAILED"),console.error(e),r(e)}})})}function getPlaylist(e){return new Promise(function(o,r){$.ajax({url:"https://api.spotify.com/v1/playlists/"+e+"?fields=tracks.items(track(name,artists(name),id,album(images)),added_by(id))",type:"GET",headers:{Authorization:"Bearer "+accessToken},success:function(e){o(e)},error:function(e){console.error("GET PLAYLIST FAILED"),console.error(e),r(e)}})})}function getRefreshedToken(e,o){return new Promise(function(o,r){$.ajax({url:"api/refreshToken.php?access_token=".concat(accessToken)+"&id=".concat(user_id,"&refresh_token=").concat(refreshToken),method:"GET",dataType:"json",success:function(e){o(e)},error:function(e){r(e)}})})}
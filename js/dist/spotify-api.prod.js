"use strict";function searchSpotify(o){$.ajax({url:"https://api.spotify.com/v1/search?type=album,artist,track,playlist&limit=8&q="+o,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+accessToken},success:function(o){searchSpotifyResponse(o)},error:function(o){alert("An error occured while searching."),console.log(o)}})}function spotifyPlay(o){var e,r,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=3<arguments.length&&void 0!==arguments[3]&&arguments[3];console.log("SPOTIFY PLAY:"),console.log("TRACK: "+o),console.log("CONTEXT: "+s),null!=s?("artist"==s.substring(8,14)&&(e=JSON.stringify({context_uri:s})),e=null!=t?JSON.stringify({context_uri:s,offset:{uri:o},position_ms:t}):JSON.stringify({context_uri:s,offset:{uri:o}}),$.ajax({url:"https://api.spotify.com/v1/me/player/play?device_id="+deviceId,data:e,type:"PUT",headers:{Authorization:"Bearer "+accessToken},success:function(){console.log("PLAY REQUEST SUCCESSFUL"),n&&makePopup("Playing song")},error:function(o){console.error("PLAY RESULT FAILED:"),console.error(o),n&&makePopup("Could not play song",!0)}})):(r=null!=t?JSON.stringify({uris:[o],position_ms:t}):JSON.stringify({uris:[o]}),$.ajax({url:"https://api.spotify.com/v1/me/player/play?device_id="+deviceId,data:r,type:"PUT",headers:{Authorization:"Bearer "+accessToken},success:function(){console.log("PLAY REQUEST SUCCESSFUL"),n&&makePopup("Playing song")},error:function(o){console.error("PLAY RESULT FAILED:"),console.error(o),n&&makePopup("Could not play song",!0)}}))}function spotifyPlayPlaylistAlbum(o){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];$.ajax({url:"https://api.spotify.com/v1/me/player/play?device_id="+deviceId,data:JSON.stringify({context_uri:o,offset:{position:0}}),type:"PUT",headers:{Authorization:"Bearer "+accessToken},success:function(){console.log("PLAY REQUEST SUCCESSFUL"),e&&makePopup("Playing successfully")},error:function(o){console.error("PLAY RESULT FAILED:"),console.error(o),makePopup("Couldn't play",!0)}})}function addToSpotifyQueue(o){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];console.log(o),console.log("addToSpotifyQueue"),console.log("https://api.spotify.com/v1/me/player/queue?uri="+o+"&device_id="+deviceId),console.log("Bearer "+accessToken),$.ajax({url:"https://api.spotify.com/v1/me/player/queue?uri="+o+"&device_id="+deviceId,type:"POST",headers:{Authorization:"Bearer "+accessToken},success:function(o){console.log("ADD TO QUEUE SUCCESSFUL"),console.log(o),e&&makePopup("Added to queue")},error:function(o){console.error("ADD TO QUEUE FAILED:"),console.error(o),e&&makePopup("Could not add to queue",!0)}})}function checkLiked(o){return new Promise(function(e,r){$.ajax({url:"https://api.spotify.com/v1/me/tracks/contains?ids="+o,type:"GET",headers:{Authorization:"Bearer "+accessToken},success:function(o){e(o[0])},error:function(o){console.error("CHECK LIKED FAILED"),console.error(o),makePopup("Error while getting saved tracks",!0),r()}})})}function getPlaylists(){return new Promise(function(e,r){$.ajax({url:"https://api.spotify.com/v1/me/playlists",type:"GET",headers:{Authorization:"Bearer "+accessToken},success:function(o){e(o)},error:function(o){console.error("GET PLAYLISTS FAIELD"),console.error(o),makePopup("Error while getting playlists",!0),r()}})})}function addToPlaylist(o,s){return new Promise(function(e,r){$.ajax({url:"https://api.spotify.com/v1/playlists/"+s+"/tracks?uris=spotify:track:"+o,type:"POST",headers:{Authorization:"Bearer "+accessToken},success:function(o){e(o)},error:function(o){console.error("ADD TO PLAYYLIST FAILED"),console.error(o),r(o)}})})}